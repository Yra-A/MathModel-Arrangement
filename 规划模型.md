# 规划模型

[TOC]
-----
**这类问题是运筹学的一个分支**
用来研究：在给定的条件下 (约束条件), 如何按照某⼀衡量指标 (⽬标函数)来寻求计划、管理⼯作中的最优⽅案

## 一般形式 (单目标)

**$min$ or $max$ $Z = f(x)$** 
**$s.t.\quad g_i(x) \le 0,\quad i = 1, 2, 3\dots m$** 

* $x:\quad$决策变量  
* $f(x):\quad$目标函数
* $g_i(x):\quad$约束条件

**我们通过目标函数和约束条件的形式来将规划模型进行分类:**



## 线性规划

**特征：目标函数和约束条件均是决策变量的线性表达式**

### 步骤
1. 分析问题，找出决策变量
2. 构造与决策变量相关的目标函数
3. 找出决策变量相关的等式或不等式约束

### 应用场景：
题目中提到“怎样安排/分配”、“最多(少)”、“利润最大”、“最合理”等词
* **生产安排**:原材料、设备有限制，总利润最大
  * 生产两种机床，利润分别为XXX，A机器和B机器加工，两种机器工作时间...两种机器怎样安排生产使得总利润最大

* **投资收益**:资产配置、收益率、损失率、组合投资, 总收益最大
  * 总资金为M，有n种资产可以配置，平均收益率...，风险损失率...，手续费...，设计组合投资方案使收益尽可能大，总体风险尽可能小

* **销售运输**:产地、销地、产量、销量、运费，总运费最省
  * 商品有m个产地和n个销地，各产地的产量...，各销地需求量...由a产地运到b销地的运价xxx;如何调运才能使总运费最省?
* **车辆安排**:路线、起点终点、承载量、时间点、车次安排最合理$\rightarrow$最多的客运量
  * 不同种类的车辆有各自的承载量，工地里有多条路线,
  满足用工需求的情况下，如何安排车辆能使
  产量尽可能大?

### 整数规划
**特征：** 在线性规划的基础上 , 加⼊决策变量取整数的条件其中最为重要的就是**0-1整数规划：整数规划的特例, 整数变量的取值只能为 0 和 1**  
通常是其中约束条件是一个二值逻辑问题： **要么选，要么不选？**
#### 应用场景：
* 背包问题 重量限制和携带方式限制
 ![image-20220801193046700](http://yra-typora-image.oss-cn-hangzhou.aliyuncs.com/img/image-20220801193046700.png)
* 标准指派问题 
 ![image-20220801195356236](http://yra-typora-image.oss-cn-hangzhou.aliyuncs.com/img/image-20220801195356236.png)
* 旅行商问题

### 真题
2000 B
2003 B
2004 A, B
2011 B
2012 B
2018 B

## 非线性规划
* 特征：目标函数或约束条件中至少有一个是非线性函数时的最优化问题（fmincon)
### 应用场景：
* 选址问题
![image-20220801195441964](http://yra-typora-image.oss-cn-hangzhou.aliyuncs.com/img/image-20220801195441964.png)
![](http://yra-typora-image.oss-cn-hangzhou.aliyuncs.com/img/image-20220801195434746.png)
* 表面积问题
* ![image-20220801195416884](http://yra-typora-image.oss-cn-hangzhou.aliyuncs.com/img/image-20220801195416884.png)
注意：线性规划问题的最优解一定是全局最优解.而非线性规划问题有局部最优解与全局最优解之分，一般的非线性规划算法往往求出的是局部最优解.
### 真题
2002 A
2006 B

# 模型求解
Matlab求解线性规划
$[x fval] = linprog(c, A, b, Aeq, beq, lb,ub, x0) $

| c        | 目标函数的系数列向量                                  |
| -------- | ----------------------------------------------------- |
| A, b     | 不等式约束条件的变量系数矩阵和常数项矩阵              |
| Aeq, beq | 等式约束条件的系数矩阵和常数项矩阵                    |
| lb, ub   | 决策变量$x$的下限和上限, $x$是向量$[x1, x2, ...xn]^T$ |
| $x_0$    | 迭代的初始值（一般不用给）                            |
整数规划的intlinprog相似，自行查阅

**但是通常情况下**，上述方法(**统称基于求解器的求解方法**）适用于求解一维的决策变量的问题如${x_i(i = 1, 2, 3\dots m)}$。
若是多维决策变量如${x_{ij}}$ or ${x_{ijk}}$的问题，则要通过矩阵变换将其变为一维，约束条件写起来就比较复杂，其并非是最优办法。下面介绍一种 **Matlab 基于问题的求解方法**
具体看https://ww2.mathworks.cn/help/optim/ug/optimproblem.html

```matlab
% 线性规划
p = optimproblem('ObjectiveSense', 'max');
x = optimvar('x', 2, 1, 'LowerBound', 0);
p.Objective = 4 * x(1) + 3 * x(2);
p.Constraints = [2 * x(1) + x(2) <=10; x(1) + x(2) <= 8; x(2) <= 7];
[f, fval] = solve(p);
xx = f.x
fval
%非线性规划
clc, clear;
p = optimproblem('ObjectiveSense', 'max');
x = optimvar('x', 2, 1, 'LowerBound', 0);
p.Objective = -x(1)^2 - 0.3 * x(1) * x(2) - 2 * x(2)^2 + 98 * x(1) + 277 * x(2);
A = [1, 1; 1, -2];
b = [100; 0];
x0.x = rand(1, 2);%初值
p.Constraints = A * x <= b;
[f, fval] = solve(p, x0); 
xx = f.x, fval
```

